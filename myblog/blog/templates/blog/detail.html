{% extends "blog/base.html" %} {% block title %}myBlog - Details {% endblock title %}
{% block detail_style %}
<style>
  /* Post Detail Styles */
  .post-meta {
    color: #6c757d;
    font-size: 0.9rem;
  }

  .comment-list {
    border-radius: 8px;
    overflow: hidden;
  }

  .comment-form {
    border-radius: 8px;
  }
</style>
{% endblock detail_style %} {% block content %}
<!-- News Details -->
<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <!-- Post Card -->
      <div class="card shadow border-0 rounded-3 overflow-hidden">
        <img
          src="{{posts.image}}"
          class="card-img-top"
          alt="Post Image"
          style="max-height: 550px; object-fit: cover"
        />
        <div class="card-body p-4">
          <h2 class="card-title fw-bold mb-3">{{ posts.title }}</h2>
          <p class="post-meta mb-4">
            <i class="fa fa-calendar-alt me-2"></i> Published on {{posts.date}}
            <span class="mx-2">|</span>
            <i class="fa fa-user me-2"></i> {{ posts.published_by }}
            <span class="mx-2">|</span>
            <i class="fa fa-folder me-2"></i> {{ posts.category }}
          </p>
          <div class="card-text lead mb-4">{{posts.content}}</div>

          <!-- Like Button -->
          <form method="POST" action="{% url 'like' posts.pk %}">
            {% csrf_token %} {% if posts.pk in request.session.liked_posts %}
            <button type="submit" class="btn btn-danger">
              <i class="fa fa-heart"></i> Unlike
            </button>
            {% else %}
            <button type="submit" class="btn btn-outline-danger">
              <i class="fa fa-heart"></i> Like
            </button>
            {% endif %}
            <span class="fw-bold text-danger ms-2">{{ posts.likes }}</span>
          </form>

          <!-- Comment Count -->
          <div class="mt-3">
            <i class="fa fa-comment text-primary me-1"></i>
            <span class="fw-bold">{{comments.count}}</span> Comments
          </div>
        </div>
      </div>

      <!-- Comments Section -->
      <div class="mt-5">
        <h4 class="fw-bold mb-3">Comments ({{ comments.count }})</h4>
        <ul class="list-group comment-list">
          {% for comment in comments %}
          <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <strong>{{comment.name}}</strong>
              <small class="post-meta">{{comment.date}}</small>
            </div>
            <p class="mb-1">{{comment.body}}</p>
          </li>
          {% empty %}
          <li class="list-group-item text-muted">
            No comment yet. Be the first to comment!
          </li>
          {% endfor %}
        </ul>
      </div>

      <!-- Comment Form -->
      <div class="mt-5">
        <h4 class="fw-bold mb-3">Leave a Comment</h4>
        <form method="POST" class="comment-form p-4 bg-white">
          {% csrf_token %}
          <div class="mb-3">{{ form.as_p }}</div>
          <button type="submit" class="btn btn-primary px-4">
            Post Comment
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
